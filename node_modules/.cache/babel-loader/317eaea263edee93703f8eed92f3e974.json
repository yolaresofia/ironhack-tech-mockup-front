{"ast":null,"code":"import _regeneratorRuntime from \"/Users/SOFIA/Documents/iron/todo/challenge-todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/SOFIA/Documents/iron/todo/challenge-todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/SOFIA/Documents/iron/todo/challenge-todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/SOFIA/Documents/iron/todo/challenge-todo-app/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport APIHelper from \"./APIHelper.js\";\n\nfunction App() {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        todos = _useState2[0],\n        setTodos = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        todo = _useState4[0],\n        setTodo = _useState4[1];\n\n  useEffect(() => {\n    const fetchTodoAndSetTodos = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var todos;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return APIHelper.getAllTodos();\n\n            case 2:\n              todos = _context.sent;\n              setTodos(todos);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n\n      return function fetchTodoAndSetTodos() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchTodoAndSetTodos();\n  }, []);\n\n  const createTodo = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var newTodo;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            e.preventDefault();\n\n            if (todo) {\n              _context2.next = 4;\n              break;\n            }\n\n            alert(\"please enter something\");\n            return _context2.abrupt(\"return\");\n\n          case 4:\n            if (!todos.some(({\n              task\n            }) => task === todo)) {\n              _context2.next = 7;\n              break;\n            }\n\n            alert(\"Task: \".concat(todo, \" already exists\"));\n            return _context2.abrupt(\"return\");\n\n          case 7:\n            _context2.next = 9;\n            return APIHelper.createTodo(todo);\n\n          case 9:\n            newTodo = _context2.sent;\n            setTodos([...todos, newTodo]);\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n\n    return function createTodo(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  const deleteTodo = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e, id) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            e.stopPropagation();\n            _context3.next = 4;\n            return APIHelper.deleteTodo(id);\n\n          case 4:\n            setTodos(todos.filter(({\n              _id: i\n            }) => id !== i));\n            _context3.next = 9;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, null, [[0, 7]]);\n    }));\n\n    return function deleteTodo(_x2, _x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  const updateTodo = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e, id) {\n      var payload, updatedTodo;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            e.stopPropagation();\n            payload = {\n              completed: !todos.find(todo => todo._id === id).completed\n            };\n            _context4.next = 4;\n            return APIHelper.updateTodo(id, payload);\n\n          case 4:\n            updatedTodo = _context4.sent;\n            setTodos(todos.map(todo => todo._id === id ? updatedTodo : todo));\n\n          case 6:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4);\n    }));\n\n    return function updateTodo(_x4, _x5) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"todo-input\",\n    type: \"text\",\n    value: todo,\n    onChange: ({\n      target\n    }) => setTodo(target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: createTodo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, \"Add\")), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, todos.map(({\n    _id,\n    task,\n    completed\n  }, i) => /*#__PURE__*/React.createElement(\"li\", {\n    key: i,\n    onClick: e => updateTodo(e, _id),\n    className: completed ? \"completed\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, task, \" \", /*#__PURE__*/React.createElement(\"span\", {\n    onClick: e => deleteTodo(e, _id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 20\n    }\n  }, \"X\")))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/SOFIA/Documents/iron/todo/challenge-todo-app/src/App.js"],"names":["React","useState","useEffect","APIHelper","App","todos","setTodos","todo","setTodo","fetchTodoAndSetTodos","getAllTodos","createTodo","e","preventDefault","alert","some","task","newTodo","deleteTodo","id","stopPropagation","filter","_id","i","updateTodo","payload","completed","find","updatedTodo","map","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport \"./App.css\"\nimport APIHelper from \"./APIHelper.js\"\n\nfunction App() {\n  const [todos, setTodos] = useState([])\n  const [todo, setTodo] = useState(\"\")\n\n  useEffect(() => {\n    const fetchTodoAndSetTodos = async () => {\n      const todos = await APIHelper.getAllTodos()\n      setTodos(todos)\n    }\n    fetchTodoAndSetTodos()\n  }, [])\n\n  const createTodo = async e => {\n    e.preventDefault()\n    if (!todo) {\n      alert(\"please enter something\")\n      return\n    }\n    if (todos.some(({ task }) => task === todo)) {\n      alert(`Task: ${todo} already exists`)\n      return\n    }\n    const newTodo = await APIHelper.createTodo(todo)\n    setTodos([...todos, newTodo])\n  }\n\n  const deleteTodo = async (e, id) => {\n    try {\n      e.stopPropagation()\n      await APIHelper.deleteTodo(id)\n      setTodos(todos.filter(({ _id: i }) => id !== i))\n    } catch (err) {}\n  }\n\n  const updateTodo = async (e, id) => {\n    e.stopPropagation()\n    const payload = {\n      completed: !todos.find(todo => todo._id === id).completed,\n    }\n    const updatedTodo = await APIHelper.updateTodo(id, payload)\n    setTodos(todos.map(todo => (todo._id === id ? updatedTodo : todo)))\n  }\n\n  return (\n    <div className=\"App\">\n      <div>\n        <input\n          id=\"todo-input\"\n          type=\"text\"\n          value={todo}\n          onChange={({ target }) => setTodo(target.value)}\n        />\n        <button type=\"button\" onClick={createTodo}>\n          Add\n        </button>\n      </div>\n\n      <ul>\n        {todos.map(({ _id, task, completed }, i) => (\n          <li\n            key={i}\n            onClick={e => updateTodo(e, _id)}\n            className={completed ? \"completed\" : \"\"}\n          >\n            {task} <span onClick={e => deleteTodo(e, _id)}>X</span>\n          </li>\n        ))}\n      </ul>\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}